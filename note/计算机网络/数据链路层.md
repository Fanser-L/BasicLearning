# 2 数据链路层

数据链路层使用的信道主要有两种：

1.点对点信道。这种信道使用一对一的点对点通信方式
2.广播信道。这种信道使用一对多的通信方式，过程比较复杂，所以需要专门的共享通信协议来协调这些主机的数据发送。

## 2.1 使用广播信道的数据链路层

ps：局域网虽然是网络的一种，但是并不把局域网放在网络层中来讨论。网络层讨论的是多个网络互联的问题，是讨论分组怎样从一个网络，通过路由器，转发到另一个网络。本节中是研究在一个局域网中，怎样从一台主机传递到另一台主机，但是并不经过路由器转发。从整个互联网来看，局域网还是属于数据链路层的范围。

局域网的主要特点：网络为一个单位所拥有，且地理范围和站点数目均有限。
三个优点：
1.具有广播功能，从一个站点课很方便的访问全网，局域网上的主机可以共享连接在局域网上的的各种硬件和软件资源。
2.便于系统的拓展和逐渐演变，各设备的位置可灵活调整和改变
3.提高了系统的可靠性，可用性和生存性

局域网可按网络拓扑进行分类：
星形网，由于集线器的出现和双绞线大量用于局域网中，星行的以太网获得了非常广泛的应用.
环形网
总线网，总线两端的匹配电阻吸收在总线上传播的有害的电磁波反射。

**点对点信道和广播信道的特点：**

PPP协议需求：
1. 简单
2. 封装成帧
3. 透明性
4. 多种网络层协议
5. 多种类型链路
6. 差错检测
7. 检测连接状态
8. 最大传送单元
9. 网络层地址协商
10. 数据压缩协商

PPP协议组成部分：

1.一个将ip数据报封装到串行链路的方法
2.一个用来建立、配置和测试数据链路连接的链路控制协议LCP。
3.一套网络控制协议NCP，其中每个协议支持不同的网络层协议。

**数据链路层的三个基本问题：**

封装成帧：
在一段数据的前后分别添加首部和尾部，这样就构成了一个帧。首部和尾部的一个重要作用是进行帧定界（确定帧的界限）。

透明传输：
帧的开始和结束的标记使用专门指明的控制字符，因此，所传输的数据中任何8比特的组合一定不允许和用作帧定界的控制字符的比特编码是一样的，否则会出现帧定界错误。

差错检测：
现实的通信链路不会是理想的，这就是说在传输过程中很可能会出现差错，1可能变成0,0也可能变成1.这叫**比特差错**。必须使用差错检测措施，目前广泛使用的是**循环冗余检验**。

**以太网MAC层的硬件地址：**

**适配器、转发器、集线器、网桥、以太网交换机的作用和使用场景：**

数据链路和物理链路：
数据链路是通过一些协议来控制数据传输用的，典型的方法是使用网络适配器（网卡）来实现这些协议。
物理链路就是指物理上的，一个结点到相邻结点的物理线路，而中间没有任何交换点。

点对点信道通信的步骤：
1.网络层到数据链路层将网络层下来的ip数据添加首尾部封装成帧。
2.将封装好的帧发送到要接受的结点的数据链路层
3.如果收到的帧没啥差错，就冲收到的帧中提取出ip数据发送到网络层，否则就丢掉这个帧

PPP协议：为了让用户计算机和ISP进行通信时使用的数据链路层协议。
